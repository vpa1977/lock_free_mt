
Разобраться с потерей девайса.
Разобраться с z и stencil буферами.

---------------------------------------------------------------------------------

Пофиксить баг:
В секции рендера возможен такой порядок событий:
1. рендер даёт команду запустить рендер_критикал,
2. в рендер приходит WindowClosed,
3. приходит ответ от системы о запуске рендер_критикала.

---------------------------------------------------------------------------------

Сделать так, чтобы рендер умел перезапускать render_critical
в партнёры к другой виндовой секции, если таковая поменялась.

---------------------------------------------------------------------------------

Отреагировать на WM_DISPLAYCHANGE.

---------------------------------------------------------------------------------

==== Запуск рендер секции
====**** Bind-to-window ( WindowSectionID, hWnd )
====******** Get-3d-info
====******** Init render
====************ Render stuff
====************ Present
====******** Close render
==== Unbind-from-window ( hWnd )

---------------------------------------------------------------------------------

level 0 : "Привязка к окну"
          рендер реагирует на CRenderSection_BindToWindow( WindowSectionID, hWnd )
              запустить render_critical, дождаться ответа
              сказать render_critical-у CRenderCriticalSection_BindToWindow, дождаться ответа
          рендер реагирует на CRenderSection_UnbindFromWindow( hWnd )

level 1 : "Запущена render_critical секция"
          рендер реагирует на get_3d_info
          рендер реагирует на init_render
          рендер реагирует на close_render

level 2 : "Рендер проинициализирован"
          рендер реагирует на рендерильные команды
          рендер реагирует на Present

level 3 : "device lost"

---------------------------------------------------------------------------------

Обязанности пользователя рендера:

1.	пользователь может завершать секцию рендера ( CRenderSection_Exit )
	только после полной процедуры отвязки от окна (см. п.2).

2.	если была сделана привязка к окну, то необходимо делать отвязку от окна при выходе.

3.	любые рендер команды игнорируются, пока не сделана привязка к окну.
















